var trayCartHelpers={sessionId:function(){return jQuery("html").attr("data-checkout-session_id")},storeId:function(){return jQuery("html").attr("data-checkout-store_id")},localStorage:function(){return JSON.parse(localStorage.getItem("data-store-intcart"))},request:function(t,e,r,a=function(){},i=function(){},o=function(){}){return jQuery.ajax({method:t,url:e,data:r,async:!0,success:function(t){a(t)},beforeSend:function(){i()},complete:function(){o(r)}})},queryString:function(){var t=window.location.search.substring(1).split("&"),e={};for(var r in t){var a=t[r].split("=");jQuery.extend(e,{[a[0]]:a[1]})}return e},convertToReal:function(t,e){return Number.prototype.formatMoney=function(t,e,r){var a=this,i=(t=isNaN(t=Math.abs(t))?2:t,e=null==e?".":e,r=null==r?",":r,a<0?"-":""),o=parseInt(a=Math.abs(+a||0).toFixed(t))+"",n=(n=o.length)>3?n%3:0;return i+(n?o.substr(0,n)+r:"")+o.substr(n).replace(/(d{3})(?=d)/g,"$1"+r)+(t?e+Math.abs(a-o).toFixed(t).slice(2):"")},e+" "+t.formatMoney(2,",",".")},getCart:function(){return jQuery.ajax({method:"get",url:"/checkout/cart/api?session_id="+this.sessionId()+"&store_id="+this.storeId()+"&nocache=0."+(new Date).getTime()})},addToCart:function(t,e){jQuery(document).on("click",t,(function(t){var r=jQuery(this).closest(".product_card");jQuery.ajax({method:"post",url:"/web_api/cart/",contentType:"application/json; charset=utf-8",data:'{\t\t\t\t\t"Cart": {\t\t\t\t\t\t"session_id": "'+trayCartHelpers.sessionId()+'",\t\t\t\t\t\t"product_id": "'+r.data("id")+'",\t\t\t\t\t\t"quantity": 1,\t\t\t\t\t\t"variant_id": 0\t\t\t\t\t}\t\t\t\t}',success:function(){"reload"===e?window.location.reload(!0):window.location=e}})}))},getProductsByCategory:function(t,e="rand"){return this.request("get","/web_api/products?category_id="+t+"&sort="+e+"&available=1",{})},getProductsById:function(t){return this.request("get","/web_api/products?id="+t+"&available=1",{})},productCard:function(t,e,r="Adicionar à sacola"){return'\t\t\t<div class="product_card"\t\t\t\tdata-currency="BRL"\t\t\t\tdata-id="'+e.id+'"\t\t\t\tdata-name="'+e.name+'"\t\t\t\tdata-category="'+e.category_id+'"\t\t\t\tdata-brand="'+e.brand+'"\t\t\t\tdata-price="'+e.price+'"\t\t\t\tdata-variant=""\t\t\t\tdata-url="'+e.url.https+'"\t\t\t\tdata-position="'+t+'"\t\t\t>\t\t\t\t<div class="image">\t\t\t\t\t<a href="'+e.url.https+'">\t\t\t\t\t\t<img src="'+e.ProductImage[0].thumbs[180].https+'" alt="'+e.name+'" class="swiper-lazy">\t\t\t\t\t</a>\t\t\t\t</div>\t\t\t\t\t\t\t\t<div class="content">\t\t\t\t\t<a href="'+e.url.https+'">\t\t\t\t\t\t<h2 class="title">'+e.name+'</h2>\t\t\t\t\t</a>\t\t\t\t\t<div class="price">\t\t\t\t\t\t'+(e.price>2&&e.payment_option?'\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="price_por">\t\t\t\t\t\t\t\t<span>de:</span>\t\t\t\t\t\t\t\t<span>'+trayCartHelpers.convertToReal(parseFloat(e.price),"R$").replace(/\s/g,"")+'</span>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="price_ou">\t\t\t\t\t\t\t\t<span>por:</span>\t\t\t\t\t\t\t\t<span>'+e.payment_option.substring(0,e.payment_option.indexOf("&")).replace(/\s/g,"")+"</span>\t\t\t\t\t\t\t\t<span>no pix</span>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t":'\t\t\t\t\t\t\t\t<div class="price_ou">\t\t\t\t\t\t\t\t<span>por:</span>\t\t\t\t\t\t\t\t<span>'+trayCartHelpers.convertToReal(parseFloat(e.price),"R$").replace(/\s/g,"").replace(/\s/g,"")+"</span>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t")+'\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t<div class="add_to_cart">'+r+"</div>\t\t\t\t</div>\t\t\t</div>\t\t"}},environment="prod",themeHost="https://cdn.jsdelivr.net/gh/iszicosmeticos/iszi.com.br-store@1.0.9/app",components={toasts:{textByValue:"um <strong>Kit Mini Cronograma Capilar</strong>"},singleProduct:{id:391,title:"Que tal incluir uma ampola com <span>33% de desconto?</span>"}};"dev"===environment&&(themeHost="https://store.iszi.local/app",components={toasts:{textByValue:"uma <strong>Ampola ISZI</strong>"},singleProduct:{id:311,title:"Que tal uma <span>embalagem especial?</span>"}});var trayCart={};function events(){if("#carrinho"!==window.location.hash&&"#principal"!==window.location.hash&&"#finalizacao"!==window.location.hash&&"#identifique_se"!==window.location.hash||(jQuery("body").prepend('<link rel="stylesheet" href="'+themeHost+'/css/iszi-cart.min.css">'),console.log("all pages")),"#carrinho"===window.location.hash){trayCart.globals.blockRemoveFromCart(),trayCart.globals.changeToastByValueText();let t=function(){trayCart.buyTogether.singleProduct({id:components.singleProduct.id,title:components.singleProduct.title})};t(),jQuery(document).on("click",".ch-cart-bin",(function(){t()}))}else"#principal"===window.location.hash?console.log("#principal"):"#finalizacao"===window.location.hash?trayCart.globals.removeJivochatPopup():"#identifique_se"===window.location.hash&&console.log("#identifique_se")}window.addEventListener("load",(function(){events()})),window.addEventListener("hashchange",(function(){events()})),trayCart.buyTogether={init:function(t){if(0===jQuery("main.container").find(".iszi_buytogether").length){if(this.createSection(t.title),"id"==t.type)var e=trayCartHelpers.getProductsById(t.id);if("category"==t.type)e=trayCartHelpers.getProductsByCategory(t.id);e.done(t=>{t.Products.forEach((t,e)=>{jQuery(".iszi_buytogether_carousel .swiper-wrapper").append('\t\t\t\t\t\t<div class="swiper-slide">\t\t\t\t\t\t\t<div>'+trayCartHelpers.productCard(t.Product,e)+"</div>\t\t\t\t\t\t</div>\t\t\t\t\t")}),this.createCarousel(),trayCartHelpers.addToCart(".iszi_buytogether .product_card .add_to_cart","reload")})}},stop:function(){jQuery(".iszi_buytogether").remove()},createSection:function(t){""!=t&&null!=t||(t="Selecionamos algumas ofertas especiais para você:"),jQuery("main.container").prepend('\t\t\t<section class="iszi_buytogether">\t\t\t\t<h1>'+t+'</h1>\t\t\t\t\t\t\t\t<div class="iszi_buytogether_carousel">\t\t\t\t\t<div class="swiper-container">\t\t\t\t\t\t<div class="swiper-wrapper"></div>\t\t\t\t\t\t<div class="swiper-button-prev"></div>\t\t\t\t\t\t<div class="swiper-button-next"></div>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</section>\t\t')},createCarousel:function(){jQuery("body").append("\t\t\t<script>\t\t\t\tsetTimeout(function() {\t\t\t\t\tconst swiper = new Swiper('.iszi_buytogether_carousel .swiper-container', {\t\t\t\t\t\tslidesPerView: 1,\t\t\t\t\t\tlazy: true,\t\t\t\t\t\tallowTouchMove: false,\t\t\t\t\t\t\t\t\t\t\t\tnavigation: {\t\t\t\t\t\t\tnextEl: '.swiper-button-next',\t\t\t\t\t\t\tprevEl: '.swiper-button-prev',\t\t\t\t\t\t},\t\t\t\t\t\t\t\t\t\t\t\tbreakpoints: {\t\t\t\t\t\t\t0: {\t\t\t\t\t\t\t\tslidesPerView: 1,\t\t\t\t\t\t\t\tloop: false,\t\t\t\t\t\t\t\tallowTouchMove: true\t\t\t\t\t\t\t},\t\t\t\t\t\t\t768: {\t\t\t\t\t\t\t\tslidesPerView: 2,\t\t\t\t\t\t\t\tloop: false,\t\t\t\t\t\t\t\tallowTouchMove: false\t\t\t\t\t\t\t}\t\t\t\t\t\t}\t\t\t\t\t});\t\t\t\t}, 1000);\t\t\t<\/script>\t\t")},singleProduct:function(t){if(t.id&&!jQuery(".iszi_buytogether_single_product").length){trayCartHelpers.getCart().done(r=>{var a=!1;(r=r).data.cart.products.forEach(e=>{t.id==e.id&&(a=!0)}),a||e()});var e=function(){trayCartHelpers.getProductsById(t.id).done(e=>{jQuery(".iszi_buytogether_single_product").length||e.Products.length&&(jQuery('[data-cart-template="products"]').after('\t\t\t\t\t\t<section class="iszi_buytogether_single_product">\t\t\t\t\t\t\t '+(t.title?"<h1>"+t.title+"</h1>":"")+"\t\t\t\t\t\t</section>\t\t\t\t\t"),e.Products.forEach((t,e)=>{jQuery(".iszi_buytogether_single_product").append(trayCartHelpers.productCard(e,t.Product,"Adicionar ao carrinho"))}),trayCartHelpers.addToCart(".iszi_buytogether_single_product .product_card .add_to_cart","reload"))})}}}},trayCart.orderBump={init:function(t){0===jQuery("main.container").find(".iszi_orderbump").length&&trayCartHelpers.getCart().done(e=>{let r=(e=e).data.cart.products,a=this.getProductMaxPrice(r),i=this.getProductToOffer(a,t.type,t.sort);0!==a.length&&(console.log(a),i.done(t=>{t.Products.forEach(t=>{console.log(t.Product);e.data.cart.products.find(e=>{if(e.id===t.Product.id&&e.id!==a.id)return!0})}),console.log(find)}))})},stop:function(){jQuery(".iszi_orderbump").remove()},getProductMaxPrice:function(t){if(0===t.length)return[];var e=Math.max(...t.map(t=>t.price));return t.find(t=>{if(e==t.price)return t})},getProductToOffer:function(t,e,r){return"category"==e?trayCartHelpers.getProductsByCategory(t.Category.id,r||"rand"):"price"==e?trayCartHelpers.getProductsById(this.getProductRelated(t.id)):void 0},getProductRelated:function(t){var e=null,r={223:"177",203:"181"};return Object.keys(r).forEach((function(a){t===a&&(e=r[a])})),e},saveLocalStorage:function(){jQuery(document).on("click",".iszi_orderbump .product_card .add_to_cart",(function(t){}))},createSection:function(t,e){""!=t&&null!=t||(t="Oferta imperdível"),""!=e&&null!=e||(e="Aproveite e leve junto com um super desconto de 60%!"),jQuery("main.container").prepend('\t\t\t<section class="iszi_orderbump">\t\t\t\t<div class="iszi_orderbump_background"></div>\t\t\t\t<div class="iszi_orderbump_close"></div>\t\t\t\t<div class="iszi_orderbump_wrapper">\t\t\t\t\t<h1>'+t+"</h1>\t\t\t\t\t<h2>"+e+'</h2>\t\t\t\t\t\t\t\t\t\t<div class="iszi_orderbump_content">\t\t\t\t\t\t<div class="iszi_orderbump_carousel">\t\t\t\t\t\t\t<div class="swiper-container">\t\t\t\t\t\t\t\t<div class="swiper-wrapper"></div>\t\t\t\t\t\t\t\t<div class="swiper-button-prev"></div>\t\t\t\t\t\t\t\t<div class="swiper-button-next"></div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</section>\t\t')},createCarousel:function(){jQuery("body").append("\t\t\t<script>\t\t\t\tsetTimeout(function() {\t\t\t\t\tconst swiper = new Swiper('.iszi_orderbump_carousel .swiper-container', {\t\t\t\t\t\tslidesPerView: 1,\t\t\t\t\t\tlazy: true,\t\t\t\t\t\tallowTouchMove: false,\t\t\t\t\t\t\t\t\t\t\t\tnavigation: {\t\t\t\t\t\t\tnextEl: '.swiper-button-next',\t\t\t\t\t\t\tprevEl: '.swiper-button-prev',\t\t\t\t\t\t},\t\t\t\t\t\t\t\t\t\t\t\tbreakpoints: {\t\t\t\t\t\t\t0: {\t\t\t\t\t\t\t\tslidesPerView: 1,\t\t\t\t\t\t\t\tloop: false,\t\t\t\t\t\t\t\tallowTouchMove: true\t\t\t\t\t\t\t}\t\t\t\t\t\t}\t\t\t\t\t});\t\t\t\t}, 1000);\t\t\t<\/script>\t\t")}},trayCart.globals={blockRemoveFromCart:function(){setInterval((function(){jQuery("[data-cart-template=products] > div .ch-cart-product").each((function(){let t=jQuery(this);jQuery(t).find("div:first-child > .ch-text-right strong").data("bind").indexOf("Gr")>0&&jQuery(t).find("svg").hide()}))}),250)},changeToastByValueText:function(){setInterval((function(){document.querySelector(".ch-campaign-text").innerHTML=document.querySelector(".ch-campaign-text").outerHTML.replace(/um super brinde exclusivo/g,components.toasts.textByValue)}),250)},removeJivochatPopup:function(){jQuery("main.container").prepend("\t\t\t<style>\t\t\t\tjdiv {\t\t\t\t\tdisplay: none !important;\t\t\t\t}\t\t\t</style>\t\t")},removeHotjarSurveyPopup:function(){jQuery("main.container").prepend("\t\t\t<style>\t\t\t\t._hj-widget-container {\t\t\t\t\tdisplay: none !important;\t\t\t\t}\t\t\t</style>\t\t")},addHotjarSurveyPopup:function(){jQuery("main.container").prepend("\t\t\t<style>\t\t\t\t._hj-widget-container {\t\t\t\t\tdisplay: block !important;\t\t\t\t}\t\t\t</style>\t\t")}};